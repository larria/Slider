var Slider=function(t){var s=function(t){this.conf=this._extends({wrap:"slider",itemClass:"slider_item",startOn:0,slideBy:1,speed:6,isVertical:false,isLoop:true,autoPlay:true,autoInterval:3,onReady:function(t){},onAniStart:function(t){},onAniEnd:function(t){},onEdge:function(t){}},t);this._initDoms();this._initStates();this._initEvents();this._launch()};s.prototype={_id:function(t){return document.getElementById(t)},_class:function(t,s,e){var n=[],o,a,r;if(s==null)s=document.body;if(e==null)e="*";if(s.getElementsByClassName){return s.getElementsByClassName(t)}o=s.getElementsByTagName(e);a=o.length;r=new RegExp("(^|\\s)"+t+"(\\s|$)");for(i=0,j=0;i<a;i++){if(r.test(o[i].className)){n[j]=o[i];j++}}return n},_extends:function(t,s){for(property in s){t[property]=s[property]}return t},_css3Prop:function(){if(this.css3Prop)return this.css3Prop;var t={};var s=document.createElement("div").style;var i=function(){var t=["t","webkitT","MozT","msT","OT"],i,e=0,n=t.length;for(;e<n;e++){i=t[e]+"ransform";if(i in s)return t[e].substr(0,t[e].length-1)}return false}();this.css3Prop={support:typeof i==="boolean"?false:true,vendor:i,cssVendor:i?"-"+i.toLowerCase()+"-":"",transform:e("transform"),transition:e("transition"),transitionProperty:e("transitionProperty"),transitionDuration:e("transitionDuration"),transformOrigin:e("transformOrigin"),transitionTimingFunction:e("transitionTimingFunction"),transitionDelay:e("transitionDelay"),transitionEnd:e("transitionend")};return this.css3Prop;function e(t){if(i===false)return false;if(i==="")return t;return i+t.charAt(0).toUpperCase()+t.substr(1)}},_easeOut:function(t,s,i,e){return-i*(t/=e)*(t-2)+s},_addEvent:function(t,s,i){t.attachEvent?t.attachEvent("on"+s,i):t.addEventListener(s,i,false)},_initDoms:function(t){var s=this,i=this.conf,e=s._id(i.wrap),n,o,a=e.innerHTML,r,l,u;n=i.isVertical?"":' style="float:left;"';o=i.isLoop?"<div"+n+">"+a+"</div><div"+n+">"+a+"</div>":a;r='<div style="'+(i.isVertical?"height":"width")+':30000px;zoom:1;">'+o+"</div>";e.innerHTML=r;l=e.getElementsByTagName("div")[0];l.style.position="relative";u=this._class(i.itemClass,e,"div");for(var d=0,c=u.length;d<c;d++){u[d].style["float"]=i.isVertical?"none":"left"}this.doms={wrap:e,aniWrap:l,items:u}},_initStates:function(t){var s=this,i=this.conf,e=this.doms,n=e.items,o=this._css3Prop(),a,r,l,u,d,c,h,f,m,v,p,_,P,y,x,E;l=i.isVertical?"v":"h";d=i.isVertical?e.wrap.clientHeight:e.wrap.clientWidth;u=n.length;c=i.speed/10;a=d*i.slideBy;p=i.isVertical?"offsetTop":"offsetLeft";_=i.isVertical?"offsetHeight":"offsetWidth";P=[];for(var T=0;T<u;T++){P.push(n[T][p])}y=P[u-1]+n[u-1][_];h="ontouchstart"in window;f=i.isVertical?"marginTop":"marginLeft";if(o.vendor==""){x="transform "+c+"s ease-out"}else if(o.vendor){x="-"+o.vendor+"-transform "+c+"s ease-out"}E=function(){var t=s.conf,i=s.doms,e=s.states,n=s._css3Prop();t.onAniEnd&&t.onAniEnd.call(s);e.animating=false;i.aniWrap.removeEventListener(n.transitionEnd,arguments.callee,false)};this.states={curIdx:i.startOn,slideDir:l,wrapSize:d,total:u,slidePX:a,itemPos:P,totalPX:y,duration:c,supportTouch:h,cssProterty:f,to:null,now:0,fromPos:null,movedPos:null,animating:false,transitionAni:x,onTransitionEnd:E,touchStartX:null,touchStartY:null,deltaDis0:null,deltaDis1:null,startPos:null}},_initEvents:function(t){var s=this,i=this.conf,e=this.doms,n=this.states,o=e.wrap;this._addEvent(o,"mouseover",function(){if(i.autoPlay){clearInterval(s._auto);s._auto=null}});this._addEvent(o,"mouseout",function(){if(i.autoPlay){s.autoSlide(true)}});if(n.supportTouch){this._addEvent(o,"touchstart",function(t){s._touchstart(t)});this._addEvent(o,"touchmove",function(t){s._touchmove(t)});this._addEvent(o,"touchend",function(t){s._touchend(t)})}},_launch:function(){var t=this.conf,s=this.doms,i=this.states;if(t.startOn){this._moveToEle(t.startOn);i.fromPos=-i.wrapSize*t.startOnPX}else if(t.startOnPX){this._moveByPx(t.startOnPX,true);i.fromPos=-t.startOnPX}t.onReady&&t.onReady.call(this);if(t.autoPlay){this.autoSlide(true)}},_touchstart:function(t){var s=this,i=this.conf,e=this.doms,n=this.states,o=this._css3Prop();if(t.touches.length!==1){return}if(i.isLoop){if(n.curIdx==0){n.curIdx+=n.total/2}if(n.curIdx==n.total-1){n.curIdx-=n.total/2}e.aniWrap.style[o.transition]="all 0s ease-out";this._moveToEle(n.curIdx)}clearInterval(this._auto);this._auto=null;n.touchStartX=t.touches[0].pageX;n.touchStartY=t.touches[0].pageY;if(i.isVertical){n.deltaDis0=n.touchStartY}else{n.deltaDis0=n.touchStartX}n.startPos=-n.curIdx*n.slidePX;n.touched=true},_touchmove:function(t){var s=this,i=this.conf,e=this.doms,n=this.states,o=this._css3Prop(),a,r,l,u,d;if(t.touches.length!==1){return}a=t.touches[0].pageX;r=t.touches[0].pageY;l=a-n.touchStartX;u=r-n.touchStartY;if(i.isVertical){if(Math.abs(u)===0||Math.abs(l)/Math.abs(u)>=1){t.preventDefault()}n.deltaDis1=r-n.deltaDis0;d=n.startPos+u}else{if(Math.abs(l)===0||Math.abs(u)/Math.abs(l)>=1){t.preventDefault()}n.deltaDis1=a-n.deltaDis0;d=n.startPos+l}var c=i.isVertical?"translate3d(0,"+d+"px,0)":"translate3d("+d+"px,0,0)";e.aniWrap.style[o.transform]=c},_touchend:function(t){var s=this,i=this.conf,e=this.doms,n=this.states,o=this._css3Prop(),a;if(n.deltaDis1<-30){this.next();n.deltaDis1=0}else if(n.deltaDis1>30){this.prev();n.deltaDis1=0}else{this._slideToCss3(n.curIdx)}n.touched=false},_moveToEle:function(t,s,i){var e=this,n=this.conf,o=this.doms,a=this.states,r=a.curIdx,l=s?r+t:t,u=o.aniWrap,d=o.items,c=d[l],h=this._css3Prop(),f,m;if(t!=r){n.onIndexChanged&&n.onIndexChanged.call(this,t)}f=-a.itemPos[l];m=n.isVertical?"translate3d(0,"+f+"px,0)":"translate3d("+f+"px,0,0)";if(h.vendor!==false){if(a.animating){u.removeEventListener(h.transitionEnd,a.onTransitionEnd,false)}u.style[h.transition]="all 0s ease-out";u.style[h.transform]=m;a.curIdx=l;setTimeout(function(){i&&i.call(e)},20)}else{u.style[a.cssProterty]=f+"px";a.curIdx=l;i&&i.call(this)}},_moveToPX:function(t,s,i){var e=this,n=this.conf,o=this.doms,a=this.states,r=o.aniWrap,l=o.items,u=l[toIdx],d=this._css3Prop(),c,h},_slideToCss3:function(t){var s=this,i=this.conf,e=this.doms,n=this.states,o=e.items,a=e.aniWrap,r=this._css3Prop(),l,u;a.style[r.transition]=n.transitionAni;l=i.isVertical?-o[t].offsetTop:-o[t].offsetLeft;u=i.isVertical?"translate3d(0,"+l+"px,0)":"translate3d("+l+"px,0,0)";a.style[r.transform]=u;if(n.animating){a.removeEventListener(r.transitionEnd,n.onTransitionEnd,false)}a.style[r.transform]=u;a.addEventListener(r.transitionEnd,n.onTransitionEnd,false);n.curIdx=t},_slideToTdt:function(t){var s=this,i=this.conf,e=this.doms,n=this.states,o=e.aniWrap,a=n.cssProterty,r=n.duration*1e3,l=n.now,u=n.wrapSize,d;if(n.to===null||n.to==t){n.fromPos=-n.curIdx*u}else{n.fromPos=n.movedPos;n.now=0}if(r-l<20){o.style[a]=-t*u+"px";n.curIdx=t;clearTimeout(this.aniInterval);this.aniInterval=null;n.now=0;n.to=null;n.fromPos=-n.curIdx*u;n.movedPos=null;i.onAniEnd&&i.onAniEnd.call(this);n.animating=false;return}d=this._easeOut(l,n.fromPos,-t*u-n.fromPos,r);o.style[a]=d+"px";n.now+=20;n.movedPos=d;this.aniInterval=setTimeout(function(){s._slideToTdt(t)},20)},prev:function(){var t=this.conf,s=this.doms,i=this.states,e=i.curIdx,n;if(t.isLoop&&e==0){this._moveToEle(i.total/2,false,function(){n=i.curIdx-t.slideBy;this.slideTo(n)})}else{n=i.curIdx-t.slideBy;this.slideTo(n)}},next:function(){var t=this.conf,s=this.doms,i=this.states,e=i.curIdx,n;if(t.isLoop&&e==i.total-1){this._moveToEle(i.total/2-1,false,function(){n=i.curIdx+t.slideBy;this.slideTo(n)})}else{n=i.curIdx+t.slideBy;this.slideTo(n)}},slideByEle:function(t){var s=this.states.curIdx+t;this.slideTo(s)},slideTo:function(t){var s=this,i=this.conf,e=this.doms,n=this.states,o=n.curIdx,a=n.total,r=this._css3Prop(),l,u;l=t>a-1?t%a:t<0?a+t%a:t;if(l==o){return}i.onIndexChanged&&i.onIndexChanged.call(this,l);n.animating=true;if(i.autoPlay){this.autoSlide(true)}i.onAniStart&&i.onAniStart.call(this);if(r.vendor!==false){this._slideToCss3(l)}else{this._slideToTdt(l)}},autoSlide:function(t){var s=this;if(this._auto){clearInterval(this._auto);this._auto=null}if(t){this._auto=setInterval(function(){s.next()},this.conf.autoInterval*1e3)}},insertItem:function(t){},refresh:function(t){var s=this,i=this.conf,e=this.doms,n=this.states,o=this._css3Prop(),a;a=i.isVertical?e.wrap.clientHeight:e.wrap.clientWidth;n.slidePX=a*i.slideBy;if(n.animating){n.onTransitionEnd()}e.aniWrap.style[o.transition]="all 0s ease-out";this._moveToEle(n.curIdx)},destroy:function(){}};return s}();