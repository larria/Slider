var Slider=function(t){var s=function(t){this.conf=this._extends({wrapId:"slider",itemClass:"slider_item",sameSize:true,startOn:0,scrollBy:1,speed:6,isVertical:false,isLoop:true,autoPlay:true,autoInterval:3,absoluteAni:false,onReady:function(t){},onAniStart:function(t,i){},onAniEnd:function(t,i){},onEdge:function(t){}},t);this._initDoms();this._initStates();this._initEvents();this._launch()};s.prototype={_id:function(t){return document.getElementById(t)},_class:function(t,s,e){var n=[],o,a,r;if(s==null)s=document.body;if(e==null)e="*";if(s.getElementsByClassName){return s.getElementsByClassName(t)}if(s.querySelectorAll){return s.querySelectorAll("."+t)}o=s.getElementsByTagName(e);a=o.length;r=new RegExp("(^|\\s)"+t+"(\\s|$)");for(i=0,j=0;i<a;i++){if(r.test(o[i].className)){n[j]=o[i];j++}}return n},_extends:function(t,i){for(property in i){t[property]=i[property]}return t},_prefix:function(){var t;if(this.css3Key){return this.css3Key}var i=document.createElement("div").style,s=function(){var t="t,webkitT,MozT,msT,OT".split(","),s,e=0,n=t.length;for(;e<n;e++){s=t[e]+"ransform";if(s in i){if(s=="msTransform"){return false}return t[e].substr(0,t[e].length-1)}}return false}();t=s==""?"transitionend":s+"TransitionEnd";this.css3Key={support:typeof s==="boolean"?false:true,vendor:s,cssVendor:s?"-"+s.toLowerCase()+"-":"",transform:e("transform"),transition:e("transition"),transitionProperty:e("transitionProperty"),transitionDuration:e("transitionDuration"),transformOrigin:e("transformOrigin"),transitionTimingFunction:e("transitionTimingFunction"),transitionDelay:e("transitionDelay"),transitionEnd:t};return this.css3Key;function e(t){if(s==="")return t;t=t.charAt(0).toUpperCase()+t.substr(1);return s+t}},_easeOut:function(t,i,s,e){return-s*(t/=e)*(t-2)+i},_addEvent:function(t,i,s){t.attachEvent?t.attachEvent("on"+i,s):t.addEventListener(i,s,false)},_initDoms:function(t){var i=this,s=this.conf,e=i._id(s.wrapId),n=e.innerHTML,o,a,r;if(s.isLoop){o='					<div style="'+(s.isVertical?"height":"width")+':30000px;zoom:1;">						<div style="float:left;">'+n+'</div>						<div style="float:left;">'+n+"</div>					</div>"}else{o='<div style="'+(s.isVertical?"height":"width")+':30000px;zoom:1;">'+n+"</div>"}e.innerHTML=o;a=e.getElementsByTagName("div")[0];a.style.position="relative";r=this._class(s.itemClass,e,"div");for(var l=0,h=r.length;l<h;l++){r[l].style["float"]=s.isVertical?"none":"left"}this.doms={wrap:e,aniWrap:a,items:r,oInnerHTML:n}},_initStates:function(t){var i=this,s=this.conf,e=this.doms,n=e.items,o=this._prefix(),a,r,l,h,u,c,d,f,m,v,p,y;l=s.isVertical?"v":"h";u=s.isVertical?e.wrap.clientHeight:e.wrap.clientWidth;h=s.scrollDis?s.isLoop?Math.ceil(e.wrap.getElementsByTagName("div")[0].clientWidth*2/s.scrollDis):Math.ceil(e.wrap.getElementsByTagName("div")[0].clientWidth)/s.scrollDis:n.length;c=s.speed/10;a=e.wrap.clientWidth*s.scrollBy;d="touchstart"in window;f=s.isVertical?s.absoluteAni?"top":"marginTop":s.absoluteAni?"left":"marginLeft";if(o.vendor==""){p="transform "+c+"s ease-out"}else if(o.vendor){p="-"+o.vendor+"-transform "+c+"s ease-out"}y=function(){var t=i.conf,s=i.doms,e=i.states,n=i._prefix();t.onAniEnd&&t.onAniEnd.call(i);e.animating=false;s.aniWrap.removeEventListener(n.transitionEnd,arguments.callee,false)};this.states={curIndex:s.startOn,scrollType:l,wrapSize:u,total:h,scrollDis:a,duration:c,touchDev:d,cssProterty:f,to:null,now:0,fromPos:null,movedPos:null,animating:false,transitionAni:p,onTransitionEnd:y}},_initEvents:function(t){var i=this,s=this.conf,e=this.doms,n=this.states,o=e.wrap;this._addEvent(o,"mouseover",function(){if(s.autoPlay){clearInterval(i._auto);i._auto=null}});this._addEvent(o,"mouseout",function(){if(s.autoPlay){i.autoSlide()}});if("ontouchstart"in window){this._addEvent(o,"touchstart",function(t){i._touchstart(t)});this._addEvent(o,"touchmove",function(t){i._touchmove(t)});this._addEvent(o,"touchend",function(t){i._touchend(t)})}},_launch:function(){var t=this.conf,i=this.doms,s=this.states;if(t.startOn){this._moveToEle(t.startOn);s.fromPos=-s.wrapSize*t.startOnPos}else if(t.startOnPos){this._moveByPx(t.startOnPos,true);s.fromPos=-t.startOnPos}t.onReady&&t.onReady.call(this);if(t.autoPlay){this.autoSlide()}},_touchstart:function(t){var i=this,s=this.conf,e=this.doms,n=this.states,o=this._prefix();if(t.touches.length!==1){return}if(s.isLoop){if(n.curIndex==0){n.curIndex+=n.total/2}if(n.curIndex==n.total-1){n.curIndex-=n.total/2}e.aniWrap.style[o.transition]="all 0s ease-out";this._moveToEle(n.curIndex)}clearInterval(this._auto);this._auto=null;this.touchInitPos=t.touches[0].pageX;this.touchInitPosY=t.touches[0].pageY;this.deltaX1=this.touchInitPos;this.startPos=-n.curIndex*n.scrollDis;n.touched=true},_touchmove:function(t){var i=this,s=this.conf,e=this.doms,n=this.states,o=this._prefix(),a;if(t.touches.length!==1){return}var r=t.touches[0].pageX;var l=t.touches[0].pageY;var h=r-this.touchInitPos;var u=l-this.touchInitPosY;if(Math.abs(u)===0||Math.abs(h)/Math.abs(u)>=1){t.preventDefault()}this.deltaX2=r-this.deltaX1;var a=this.startPos+h;var c=a+"px,0";var d=s.isVertical?"translate3d(0,"+a+"px,0)":"translate3d("+a+"px,0,0)";e.aniWrap.style[o.transform]="translate3d("+c+", 0)"},_touchend:function(t){var i=this,s=this.conf,e=this.doms,n=this.states,o=this._prefix(),a;if(this.deltaX2<-30){this.next();this.deltaX2=0}else if(this.deltaX2>30){this.prev();this.deltaX2=0}else{this._slideToCss3(n.curIndex)}n.touched=false},_moveToEle:function(t,i,s){var e=this,n=this.conf,o=this.doms,a=this.states,r=a.curIndex,l=i?r+t:t,h=o.aniWrap,u=o.items,c=u[l],d=this._prefix(),f,m;if(t!=r){n.onIndexChanged&&n.onIndexChanged.call(this,t)}f=n.isVertical?-c.offsetTop:-c.offsetLeft;m=n.isVertical?"translate3d(0,"+f+"px,0)":"translate3d("+f+"px,0,0)";if(d.vendor!==false){if(a.animating){h.removeEventListener(d.transitionEnd,a.onTransitionEnd,false)}h.style[d.transition]="all 0s ease-out";h.style[d.transform]=m;a.curIndex=l;setTimeout(function(){s&&s.call(e)},20)}else{h.style[a.cssProterty]=f+"px";a.curIndex=t;s&&s.call(this)}},_slideToCss3:function(t){var i=this,s=this.conf,e=this.doms,n=this.states,o=e.items,a=e.aniWrap,r=this._prefix(),l,h;a.style[r.transition]=n.transitionAni;l=s.isVertical?-o[t].offsetTop:-o[t].offsetLeft;h=s.isVertical?"translate3d(0,"+l+"px,0)":"translate3d("+l+"px,0,0)";a.style[r.transform]=h;if(n.animating){a.removeEventListener(r.transitionEnd,n.onTransitionEnd,false)}a.style[r.transform]=h;a.addEventListener(r.transitionEnd,n.onTransitionEnd,false);n.curIndex=t},_slideToTdt:function(t){var i=this,s=this.conf,e=this.doms,n=this.states,o=e.aniWrap,a=n.cssProterty,r=n.duration*1e3,l=n.now,h=n.wrapSize,u;if(n.to===null||n.to==t){n.fromPos=-n.curIndex*h}else{n.fromPos=n.movedPos;n.now=0}if(r-l<20){o.style[a]=-t*h+"px";n.curIndex=t;clearTimeout(this.aniInterval);this.aniInterval=null;n.now=0;n.to=null;n.fromPos=-n.curIndex*h;n.movedPos=null;s.onAniEnd&&s.onAniEnd.call(this);n.animating=false;return}u=this._easeOut(l,n.fromPos,-t*h-n.fromPos,r);o.style[a]=u+"px";n.now+=20;n.movedPos=u;this.aniInterval=setTimeout(function(){i._slideToTdt(t)},20)},prev:function(){var t=this.conf,i=this.doms,s=this.states,e=s.curIndex,n;if(t.isLoop&&e==0){this._moveToEle(s.total/2,false,function(){n=s.curIndex-t.scrollBy;this.slideTo(n)})}else{n=s.curIndex-t.scrollBy;this.slideTo(n)}},next:function(){var t=this.conf,i=this.doms,s=this.states,e=s.curIndex,n;if(t.isLoop&&e==s.total-1){this._moveToEle(s.total/2-1,false,function(){n=s.curIndex+t.scrollBy;this.slideTo(n)})}else{n=s.curIndex+t.scrollBy;this.slideTo(n)}},slideByEle:function(t){var i=this.states.curIndex+t;this.slideTo(i)},slideTo:function(t){var i=this,s=this.conf,e=this.doms,n=this.states,o=n.curIndex,a=n.total,r=this._prefix(),l,h;l=t>a-1?t%a:t<0?a+t%a:t;if(l==o){return}s.onIndexChanged&&s.onIndexChanged.call(this,l);n.animating=true;if(s.autoPlay){this.autoSlide()}s.onAniStart&&s.onAniStart.call(this);if(r.vendor!==false){this._slideToCss3(l)}else{this._slideToTdt(l)}},autoSlide:function(){var t=this;if(this._auto){clearInterval(this._auto);this._auto=null}this._auto=setInterval(function(){t.next()},this.conf.autoInterval*1e3)},disableAuto:function(){if(this._auto){clearInterval(this._auto);this._auto=null}},insertItem:function(t){},refresh:function(t){var i=this,s=this.conf,e=this.doms,n=this.states,o=this._prefix(),a;a=t&&t.width?t.width:s.isVertical?e.wrap.clientHeight:e.wrap.clientWidth;n.scrollDis=a*s.scrollBy;if(n.animating){n.onTransitionEnd()}e.aniWrap.style[o.transition]="all 0s ease-out";this._moveToEle(n.curIndex)},destroy:function(){}};return s}();